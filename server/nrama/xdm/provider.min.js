/**
 * How to make couchdb work with easyXDM's rpc.
 * 
 * we'll have to do some wrapping to make easyXDM play nicely:
 * 
 *  1. when easyXDM executes the remote calls it calls the methods defined here
 *  with TWO callbacks, success and error.  This messes up how db.nrama.js &
 *  session.nrama.js handle the optional parameters (which is a weakness). See
 *  line 2758 in easyXDM.debug.js
 *
 *  2. easyXDM wraps callbacks in such a way that only the first parameter
 *  is passed up to the original callback (line 2728 in easyXDM.debug.js).
 *
 *  To around these points, we wrap the methods so as to (i) delete the final
 *  argument with which they are called, and (ii) invoke the callback with
 *  parameters as an array.  This (ii) requires complementary wrapping at the
 *  other end (the consumer).
 */var _array_wrap=function(a){return function(){var b=Array.prototype.slice.call(arguments);a(b)}},_wrap=function(a){return{method:function(){var b=[];$.each(arguments,function(a,c){typeof c=="function"?b.push(_array_wrap(c)):b.push(c)});var c=b.length;b.splice(c-1,1),a.apply(this,b)}}},local={test:{method:function(a,b,c){return b(a)}},db_saveDoc:_wrap(db.saveDoc),db_removeDoc:_wrap(db.removeDoc),db_getView:_wrap(db.getView),db_doUpdate:_wrap(db.doUpdate),session_login:_wrap(session.login),session_logout:_wrap(session.logout),session_info:_wrap(session.info)},remote={get_version:{},msg:{},modal:{}},onReady=function(){},_rpc=new easyXDM.Rpc({onReady:onReady},{local:local,remote:remote});fn=function(){$.each(arguments,function(a,b){console.log(b)})}